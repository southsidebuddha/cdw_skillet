# Summary
You must understand and read  the palo alto AWS Transit Gateway Deployment Guide.The panorama config are generated following the the deployment guide but combine the east west with outbound firewall. You can check the rendered config to see what the actual config are.

# Instruction



## notes
0. There are several commit you will have to do when copy and paste the script. Please read the comment carefully in the script
1. After creating device group. A commit is required.
2. Devie grouop heiarchy needs to be created manually. A commit is required
3. Onboard firewalls to the appropriate device groups. A commit is required
4. After creating template stacks at the end of the script, firewalls need to be assigned to the appropriate template stack manually. A commit is required.
5. Variables for each ***device***, NOT template stack, need to be defined manually and applied 
6. Pre-shared keys for IPSec VPN tunnel needs to be overriden in each template stack manually.


## Variable list


### Inbound firewall variables:

**private_network**: The network for all the spokes VPCs. The network address should be summried if necessary

**private_network_next_hop**: The next hop to forward the traffic to the spoke VPCs. The IP address should be AWS router.

**public_network**: The network to forward the traffic back to Internet. It should be the 0.0.0.0/0 for most of the time

**public_network_next_hop**:The next hop to forward the traffic to the Internet. The IP address should be AWS router.




### Outbound and East West firewall variables:

**Tunnel-Interface-IP-1**: Tunnel IP address for running IPSEC with AWS VPN. this is generated by the AWS config by default. If you would like to change it, please ask the Cloud Ps to modify it before AWS deployment

**Tunnel-Interface-Peer-1**: Peer tunnel IP address for running IPSEC from AWS VPN. this is generated by the AWS config by default. If you would like to change it, please ask the Cloud Ps to modify it before AWS deployment

**IKE-Gateway-Peer-1**: Public IP address for running IPSEC from AWS VPN. this is generated by the AWS config. You can't change it.

**Tunnel-Interface-IP-2**: Second tunnel IP address for running IPSEC with AWS VPN. this is generated by the AWS config by default. If you would like to change it, please ask the Cloud Ps to modify it before AWS deployment

**Tunnel-Interface-Peer-2**: Second peer tunnel IP address for running IPSEC from AWS VPN. this is generated by the AWS config by default. If you would like to change it, please ask the Cloud Ps to modify it before AWS deployment

**IKE-Gateway-Peer-2**: Second public IP address for running IPSEC from AWS VPN. this is generated by the AWS config. You can't change it.

**BGP-Router-ID**: BGP router ID for running BGP with AWS VPN. Please define the router id by yourself

**BGP-AS**: BGP AS number for running BGP with AWS VPN. This is generated by the AWS config by default. If you would like to change it, please ask the Cloud Ps to modify it before AWS deployment

**Route**: Just default route for BGP redistribution. Please use 0.0.0.0/0
